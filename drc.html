<!DOCTYPE html>
<html lang='en'>

	<head>
		<title>Dodging Rain Competition</title>
		<meta charset='UTF-8'>
		<meta name='viewport' content='width=device-width'>
		<link rel='stylesheet' type='text/css' href='drc.css'>
		<link rel='icon' type='x/icon' href='power.ico'>
        <script src='sorttable.js'></script>
		<script src='jquery.js'></script>
		<script src='utils.js'></script>
        <script src='drc.js'></script>
	</head>
	
	<body>
		<div id='wrap' class='wrap'>
			<h1>Dodging Rain Competition</h1>
            <p>The <b>Dodging Rain Competition (DRC)</b> is a Touhou game competition that was invented by ZM and is held on
            <a href='http://eientei.boards.net/thread/829/official-dodging-rain-competition-thread'>Eientei Forums</a>.
            Two teams go up against each other in several different categories. Each player posts an arbitrarily long list of categories, ordered by preference,
            which can be either survival or scoring of any Touhou shooting game and any difficulty. They will be matched up against a player from the other team, in a category that both players had on their list.
            The teams and categories are determined by the DRC management team. Players are given two weeks to sign up for the competition, and once it starts, two weeks to submit a replay,
            which will be awarded points dependent on the rubrics. Runs done outside those two weeks are invalid.</p>
            <p>If you want to know how many DRC points a run is worth, the points for a given run can be determined using the calculator below.</p>
            <h2>Points Calculator</h2>
            <p>Scores can only contain digits, commas, dots and spaces. Survival runs are assumed to have cleared, scoring runs not.</p>
            <p id='notify'></p>
            <label for='game'>Category</label>
            <select id='game' onChange='javascript:checkValues(true, true, true);'>
                <option>HRtP</option>
                <option>SoEW</option>
                <option>PoDD</option>
                <option>LLS</option>
                <option>MS</option>
                <option>EoSD</option>
                <option>PCB</option>
                <option>IN</option>
                <option>PoFV</option>
                <option>MoF</option>
                <option>SA</option>
                <option>UFO</option>
                <option>GFW</option>
                <option>TD</option>
                <option>DDC</option>
                <option>LoLK</option>
                <option>HSiFS</option>
            </select>
            <label id='difficultyLabel' for='difficulty'>Difficulty</label>
            <select id='difficulty' onChange='javascript:if ($(GAME).val() == "GFW") { checkShottypes(true); } if ($(GAME).val() == "IN") { checkValues(true, false, false); }'>
                <option>Easy</option>
                <option>Normal</option>
                <option>Hard</option>
                <option>Lunatic</option>
                <option>Extra</option>
            </select>
            <select id='route' style='display:none'>
                <option>FinalA</option>
                <option>FinalB</option>
            </select>
            <label id='challengeLabel' for='challenge'>Challenge</label>
            <select id='challenge' onChange='javascript:checkValues(true, false, false); checkShottypes(false);'>
                <option>Scoring</option>
                <option>Survival</option>
            </select>
            <div id='performance'></div>
            <label id='shottypeLabel' for='shottype'>Shottype / Route</label><select id='shottype' onChange='checkValues(false, false, false)'></select>
            <select id='season' style='display:none'>
                <option>Spring</option>
                <option>Summer</option>
                <option>Autumn</option>
                <option>Winter</option>
            </select>
			<div id='drcpoints'></div>
            <div id='error'></div>
			<p><input type='button' onClick='javascript:drcPoints()' value='Calculate'></p>
            <h2>Rubrics</h2>
            <p>The rubrics are the formulas and fixed values used to calculate the number of DRC points for a run. If you are curious about how your points are being determined, click the button below to expand.</p>
            <input id='rubricsButton' type='button' onClick='javascript:showRubrics()' value='Show Rubrics'>
            <div id='rubrics' style='display:none'>
                <p>
                    <b>Scoring Notes</b>
                    <ul>
                        <li>If a new World Record is achieved, the points are equal to the base points; otherwise, the formula applies.</li>
                        <li>MoF uses a separate system. Click <a href='#mountainOfFaith'>here</a> for said system.</li>
                        <!--<li>DS uses a separate system. Click <a href='#doubleSpoiler'>here</a> for said system.</li>-->
                    </ul>
                </p>
                <p>
                    <b>Survival Notes</b>
                    <ul>
                        <li>For a main game run, a shottype multiplier is applied to the result of the formula, the result of which is again rounded.
                        Click <a href='#shottypeMultipliers'>here</a> for the list of them.</li>
                        <li>The Phantasmagorias use a separate system. Click <a href='#phantasmagoria'>here</a> for said system.</li>
                        <li>For IN, you obtain 2 (1 on Easy) additional points for each captured Last Spell, with the exception of Imperishable Shooting, which yields 5 points.</li>
                        <li>For HSiFS, the first release adds 2 to <em>n</em> (3 on Lunatic), and further releases add 0.5 to <em>n</em>.</li>
                    </ul>
                </p>
                <table id='rubricsTable' align='center' class='noborders'>
                    <tr class='noborders'>
                        <td class='noborders'>
                            <table>
                                <thead><tr><td colspan='3'><b>Scoring</b><br>||Max * (Score/WR)^Exp||</td></tr></thead>
                                <tbody id='scoringTable'></tbody>
                            </table>
                        </td>
                        <td class='noborders' style='float:left'>
                            <table>
                                <thead><tr><td colspan='6'><b>Survival</b><br>||Max * (Base^-n)||</td></tr></thead>
                                <tbody id='survivalTable'></tbody>
                            </table>
                        </td>
                    </tr>
                </table>
                <br>
                <b id='mountainOfFaith'>MoF Scoring</b>
                <p>For each difficulty and shottype there are six thresholds, at which you will have set numbers of points respectively.
                Then, increments are done, dependent on how much higher than the threshold your score is.</p>
                <table align='center'>
                    <tbody id='mofTable'></tbody>
                </table>
                <!--<br>
                <b id='doubleSpoiler'>DS Scoring</b>
                <p>This system is specific to DRC Round 8 and the 10 scenes that are being played. For each scene there are three thresholds,
                at which you will have 10, 30 and 50 points respectively. The way this works is that 1 point is added for every 10th or 20th of
                the amount of score between the thresholds (10th below the first threshold, 20th otherwise).</p>
                <table align='center'>
                    <thead><tr><th>Scene</th><th>Threshold 1</th><th>Threshold 2</th><th>Threshold 3</th></tr></thead>
                    <tbody id='dsTable'></tbody>
                </table>-->
                <br>
                <b id='phantasmagoria'>PoDD, PoFV Survival</b>
                <p>In the below formula, MaxLives is equal to 5 for PoDD, 7 for PoFV main game and 8 for PoFV Extra.
                NoBombBonus is a difficulty-specific No Bomb bonus for PoDD and a No Charge Attacks bonus for PoFV.
                RoundsLost is equal to how many rounds the player lost.</p>
                <table align='center'>
                    <thead><tr><td colspan='4'>||Max - ((Max - Min) / MaxLives * RoundsLost)|| + NoBombBonus</td></tr></thead>
                    <tbody id='phantasmagoriaTable'></tbody>
                </table>
                <br>
                <b id='shottypeMultipliers'>Shottype Multipliers</b>
                <p>These are applied to the result of the survival formula for a main game run only; they do <em>not</em> apply for Extra,
                nor do they apply for HSiFS runs that use releases. For all shots not listed here, the shottype multipliers are equal to 1.</p>
                <table align='center'>
                    <tbody id='shottypeMultipliersTable'></tbody>
                </table>
                <br>
                <a href='#wrap'>Back to Top</a>
            </div>
		</div>
	</body>

</html>